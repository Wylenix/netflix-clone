{"ast":null,"code":"import axios from 'axios';\nimport { apiKey, lang, API_URL, AUTH_URL } from '../config'; // utilise 'sleep' pour simuler des api longue\n//const sleep = t => new  Promise((resolve) =>setTimeout(resolve, t))\n\nconst clientApi = async endpoint => {\n  const page = 1;\n  const startChar = endpoint.includes('?') ? `&` : `?`;\n  const keyLang = `${startChar}api_key=${apiKey}&language=${lang}&page=${page}`;\n  return axios.get(`${API_URL}/${endpoint}${keyLang}`);\n};\n\nconst clientAuth = (endpoint, {\n  token,\n  data\n}) => {\n  const config = {\n    headers: {\n      Authorization: token ? `Bearer ${token}` : undefined,\n      'Content-Type': data ? 'application/json' : undefined\n    }\n  };\n  return data ? axios.post(`${AUTH_URL}/${endpoint}`, JSON.stringify(data), config) : axios.get(`${AUTH_URL}/${endpoint}`, config);\n};\n\nconst clientNetFlix = async (endpoint, {\n  token,\n  data,\n  method = 'GET'\n}) => {\n  const config = {\n    method,\n    url: `${AUTH_URL}/${endpoint}`,\n    data: JSON.stringify(data),\n    headers: {\n      Authorization: token ? `Bearer ${token}` : undefined,\n      'Content-Type': data ? 'application/json' : undefined\n    }\n  };\n  return axios(config).then(response => {\n    return response.data;\n  }).catch(error => {\n    if (error.response) {\n      return Promise.reject(error.response.data);\n    }\n  });\n};\n\nexport { clientApi, clientAuth, clientNetFlix };","map":{"version":3,"sources":["/Users/lio/Documents/Programmation/React-MikeC/react-netflix-clone/src/utils/clientApi.js"],"names":["axios","apiKey","lang","API_URL","AUTH_URL","clientApi","endpoint","page","startChar","includes","keyLang","get","clientAuth","token","data","config","headers","Authorization","undefined","post","JSON","stringify","clientNetFlix","method","url","then","response","catch","error","Promise","reject"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,MAAR,EAAgBC,IAAhB,EAAsBC,OAAtB,EAA+BC,QAA/B,QAA8C,WAA9C,C,CAEA;AACA;;AAEA,MAAMC,SAAS,GAAG,MAAMC,QAAN,IAAkB;AAClC,QAAMC,IAAI,GAAG,CAAb;AACA,QAAMC,SAAS,GAAGF,QAAQ,CAACG,QAAT,CAAkB,GAAlB,IAA0B,GAA1B,GAAgC,GAAlD;AACA,QAAMC,OAAO,GAAI,GAAEF,SAAU,WAAUP,MAAO,aAAYC,IAAK,SAAQK,IAAK,EAA5E;AACA,SAAOP,KAAK,CAACW,GAAN,CAAW,GAAER,OAAQ,IAAGG,QAAS,GAAEI,OAAQ,EAA3C,CAAP;AACD,CALD;;AAOA,MAAME,UAAU,GAAG,CAACN,QAAD,EAAW;AAACO,EAAAA,KAAD;AAAQC,EAAAA;AAAR,CAAX,KAA6B;AAC9C,QAAMC,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAEJ,KAAK,GAAI,UAASA,KAAM,EAAnB,GAAuBK,SADpC;AAEP,sBAAgBJ,IAAI,GAAG,kBAAH,GAAwBI;AAFrC;AADI,GAAf;AAMA,SAAOJ,IAAI,GACPd,KAAK,CAACmB,IAAN,CAAY,GAAEf,QAAS,IAAGE,QAAS,EAAnC,EAAsCc,IAAI,CAACC,SAAL,CAAeP,IAAf,CAAtC,EAA4DC,MAA5D,CADO,GAEPf,KAAK,CAACW,GAAN,CAAW,GAAEP,QAAS,IAAGE,QAAS,EAAlC,EAAqCS,MAArC,CAFJ;AAGD,CAVD;;AAYA,MAAMO,aAAa,GAAG,OAAOhB,QAAP,EAAiB;AAACO,EAAAA,KAAD;AAAQC,EAAAA,IAAR;AAAcS,EAAAA,MAAM,GAAG;AAAvB,CAAjB,KAAmD;AACvE,QAAMR,MAAM,GAAG;AACbQ,IAAAA,MADa;AAEbC,IAAAA,GAAG,EAAG,GAAEpB,QAAS,IAAGE,QAAS,EAFhB;AAGbQ,IAAAA,IAAI,EAAEM,IAAI,CAACC,SAAL,CAAeP,IAAf,CAHO;AAIbE,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAEJ,KAAK,GAAI,UAASA,KAAM,EAAnB,GAAuBK,SADpC;AAEP,sBAAgBJ,IAAI,GAAG,kBAAH,GAAwBI;AAFrC;AAJI,GAAf;AASA,SAAOlB,KAAK,CAACe,MAAD,CAAL,CACJU,IADI,CACCC,QAAQ,IAAI;AAChB,WAAOA,QAAQ,CAACZ,IAAhB;AACD,GAHI,EAIJa,KAJI,CAIEC,KAAK,IAAI;AACd,QAAIA,KAAK,CAACF,QAAV,EAAoB;AAClB,aAAOG,OAAO,CAACC,MAAR,CAAeF,KAAK,CAACF,QAAN,CAAeZ,IAA9B,CAAP;AACD;AACF,GARI,CAAP;AASD,CAnBD;;AAqBA,SAAQT,SAAR,EAAmBO,UAAnB,EAA+BU,aAA/B","sourcesContent":["import axios from 'axios'\nimport {apiKey, lang, API_URL, AUTH_URL} from '../config'\n\n// utilise 'sleep' pour simuler des api longue\n//const sleep = t => new  Promise((resolve) =>setTimeout(resolve, t))\n\nconst clientApi = async endpoint => {\n  const page = 1\n  const startChar = endpoint.includes('?') ? `&` : `?`\n  const keyLang = `${startChar}api_key=${apiKey}&language=${lang}&page=${page}`\n  return axios.get(`${API_URL}/${endpoint}${keyLang}`)\n}\n\nconst clientAuth = (endpoint, {token, data}) => {\n  const config = {\n    headers: {\n      Authorization: token ? `Bearer ${token}` : undefined,\n      'Content-Type': data ? 'application/json' : undefined,\n    },\n  }\n  return data\n    ? axios.post(`${AUTH_URL}/${endpoint}`, JSON.stringify(data), config)\n    : axios.get(`${AUTH_URL}/${endpoint}`, config)\n}\n\nconst clientNetFlix = async (endpoint, {token, data, method = 'GET'}) => {\n  const config = {\n    method,\n    url: `${AUTH_URL}/${endpoint}`,\n    data: JSON.stringify(data),\n    headers: {\n      Authorization: token ? `Bearer ${token}` : undefined,\n      'Content-Type': data ? 'application/json' : undefined,\n    },\n  }\n  return axios(config)\n    .then(response => {\n      return response.data\n    })\n    .catch(error => {\n      if (error.response) {\n        return Promise.reject(error.response.data)\n      }\n    })\n}\n\nexport {clientApi, clientAuth, clientNetFlix}\n"]},"metadata":{},"sourceType":"module"}